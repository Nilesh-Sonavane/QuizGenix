<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <th:block th:replace="~{base :: head}"></th:block>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <aside th:replace="~{base :: admin-sidebar(page='analytics')}"></aside>

    <main class="main-content">
        <h1>Admin Analytics</h1>
        <p class="welcome-text">Real-time platform insights.</p>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>1,250</h3>
                <p>Total Users</p>
            </div>
            <div class="stat-card">
                <h3>â‚¹45,200</h3>
                <p>Total Revenue</p>
            </div>
            <div class="stat-card">
                <h3>850</h3>
                <p>AI Quizzes</p>
            </div>
            <div class="stat-card">
                <h3>98%</h3>
                <p>Uptime</p>
            </div>
        </div>

        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>User Growth</h3>
                    <select class="chart-select">
                        <option>Last 6 Months</option>
                        <option>Last Year</option>
                    </select>
                </div>
                <div class="chart-box">
                    <canvas id="growthChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <h3>Revenue Source</h3>
                    <select class="chart-select">
                        <option>Monthly</option>
                        <option>Yearly</option>
                    </select>
                </div>
                <div class="chart-box">
                    <canvas id="revenueChart"></canvas>
                </div>
            </div>
        </div>
    </main>

    <div th:replace="~{base :: scripts}"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const ctx1 = document.getElementById('growthChart').getContext('2d');
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Users',
                        data: [120, 190, 300, 500, 450, 700],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4, fill: true
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { grid: { display: false } }, y: { grid: { color: 'rgba(255,255,255,0.05)' } } } }
            });

            const ctx2 = document.getElementById('revenueChart').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['Pro', 'Team', 'Ads'],
                    datasets: [{ data: [65, 25, 10], backgroundColor: ['#3b82f6', '#a855f7', '#22c55e'], borderWidth: 0 }]
                },
                options: { responsive: true, maintainAspectRatio: false, cutout: '70%', plugins: { legend: { position: 'bottom', labels: { color: '#cbd5e1' } } } }
            });
        });
    </script>

</body>

</html>